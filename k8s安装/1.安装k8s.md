# Ubuntu 18.04 x64 安装 Kubernetes 1.16.1

> 注意：版本一定要匹配，禁止自动更新系统

## 使用命令行工具kubeadm安装
> 该工具可以简化集群的安装过程

TODO: 添加安装步骤

### 禁止Ubuntu18.04每日检查更新和推荐更新

### 手动更新一次Ubuntu18.04系统
```shell
sudo apt update
sudo apt upgrade
```

### 关闭交换空间，并重新启动服务器
```shell
swapoff -a
# Important: And vim /etc/fstab to delete the command of loading swap
reboot
```

### 安装Docker18.09.9，并设为开机自启动

> 根据Docker官网中Ubuntu系统的参考文档安装

```shell
sudo apt update
sudo apt-cache madison docker-ce
sudo apt install docker-ce=5:18.09.9~3-0~ubuntu-bionic
# 添加但钱用户到docker用户组，注销后重新登录可以直接使用docker命令
sudo usermod -aG docker fnl
```

### 安装k8s命令行安装工具，并设为开机自启动
```
deb http://mirrors.ustc.edu.cn/kubernetes/apt kubernetes-xenial main
```

### 配置kubeadm配置文件

### 下载k8s的相关镜像

### 运行kubeadm init命令安装Master
```
kubeadm init --pod-network-cidr=10.244.0.0/16
```
注意：这里不要使用--config，目前使用--config从未成功

### 配置All-In-One的k8s环境

### 安装WebUI Dashboard
```shell
kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.0-beta4/aio/deploy/recommended.yaml
kubectl proxy
# 访问 http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/
```

### （TODO）安装Node，加入集群

### 安装网络插件

### 验证k8s集群是否安装完成



## 参考文档
